<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Resume Tailor</title>
    <link rel="stylesheet" href="popup.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <div class="logo">
                <h1>
                    <span class="logo-icon">📄</span>
                    Resume Tailor
                </h1>
                <p>AI-Powered Resume Generator</p>
                <div id="test-mode-badge" class="test-badge hidden">🧪 TEST MODE</div>
            </div>
        </div>

        <!-- Auth Section (shown when not logged in) -->
        <div id="auth-section" class="section hidden">
            <div class="auth-tabs">
                <button id="login-tab" class="tab-btn active">Login</button>
                <button id="register-tab" class="tab-btn">Sign Up</button>
            </div>
            
            <form id="auth-form">
                <input type="email" id="email" placeholder="Email" required>
                <input type="password" id="password" placeholder="Password" required>
                <button type="submit" id="auth-submit">Login</button>
            </form>
            
            <div class="auth-info">
                <p>💼 Professional AI resume tailoring - Buy tokens to get started!</p>
            </div>
        </div>

        <!-- Main Section (shown when logged in) -->
        <div id="main-section" class="section">
            <!-- Workflow Steps -->
            <div class="workflow-steps">
                <div class="step active" data-step="1">1</div>
                <div class="step" data-step="2">2</div>
                <div class="step" data-step="3">3</div>
                <div class="step" data-step="4">4</div>
            </div>

            <!-- User Info -->
            <div class="user-info">
                <div class="token-balance">
                    <span class="tokens">
                        <span class="token-icon">🪙</span>
                        <span id="token-count">0</span> tokens
                    </span>
                    <button id="buy-tokens" class="buy-btn">Buy More</button>
                </div>
            </div>

            <!-- Job Detection -->
            <div class="job-detection">
                <div id="job-detected" class="job-card hidden">
                    <h3>🎯 Job Detected</h3>
                    <p id="job-title">Loading...</p>
                    <p id="job-company">Loading...</p>
                    <button id="extract-job" class="btn-primary">Extract Job Details</button>
                </div>
                
                <div id="no-job" class="job-card">
                    <h3>📋 Manual Job Entry</h3>
                    <p>Paste the job description below:</p>
                    <textarea id="manual-job" placeholder="Paste job description here..."></textarea>
                </div>
            </div>

            <!-- Resume Upload -->
            <div class="upload-section">
                <h3>📄 Upload Your Resume</h3>
                <div class="upload-area" id="upload-area">
                    <input type="file" id="resume-file" accept=".pdf,.doc,.docx,.txt" hidden>
                    <div class="upload-content">
                        <p>📁 Click to upload or drag & drop</p>
                        <p class="upload-formats">PDF, DOC, DOCX, TXT</p>
                    </div>
                </div>
                <div id="file-info" class="file-info hidden">
                    <span id="file-name"></span>
                    <button id="remove-file">✕</button>
                </div>
            </div>

            <!-- Generate Button -->
            <div class="generate-section">
                <button id="generate-btn" class="btn-generate" disabled>
                    <span class="btn-text">🚀 Generate Tailored Resume</span>
                    <span class="btn-cost">(1 token)</span>
                </button>
            </div>

            <!-- Results -->
            <div id="results-section" class="results hidden">
                <h3>✨ Your Tailored Documents</h3>
                <div class="result-tabs">
                    <button id="resume-tab" class="result-tab active">Resume</button>
                    <button id="cover-tab" class="result-tab">Cover Letter</button>
                </div>
                <div class="result-content">
                    <div id="resume-content" class="result-text"></div>
                    <div id="cover-content" class="result-text hidden"></div>
                </div>
                <div class="result-actions">
                    <button id="copy-result" class="btn-secondary">📋 Copy</button>
                    <button id="download-result" class="btn-secondary">💾 Download</button>
                </div>
            </div>

            <!-- Loading -->
            <div id="loading" class="loading hidden">
                <div class="spinner"></div>
                <p>Generating your tailored resume...</p>
                <div class="loading-stage" id="loading-stage">Analyzing your resume...</div>
            </div>
        </div>

        <!-- Footer -->
        <div class="footer">
            <div class="pricing-info">
                <p>💰 Buy Tokens: $5 for 10 • $15 for 35 • $25 for 60 (Best Value!)</p>
            </div>
            <button id="logout" class="logout-btn hidden">Logout</button>
        </div>
    </div>

    <script src="popup.js"></script>
</body>
</html>